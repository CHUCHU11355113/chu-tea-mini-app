name: Deploy to Tencent Cloud

on:
  push:
    branches: [ master ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
节点版本: '18'
    
    - name: 安装pnpm
npm install -g pnpm
    
    - name: 安装依赖
运行: 
    
    - name: 构建项目
      run: pnpm run build
    
    - name: 部署到服务器
      uses: appleboy/scp-action@master
      with:
$secrets.SERVER_HOST}
用户名: ${{secrets.SERVER_USER}}
密码: ${{secrets.SERVER_PASSWORD}
源: “dist、server、package.json、pnpm-lock.yaml、.env”
目标: "/home/ubuntu/chu-tea-mini-app-main"
        strip_components: 0
    
    - 名称: 重启应用
用途: appleboy/ssh-action@master
      with:
主机: ${{密钥
